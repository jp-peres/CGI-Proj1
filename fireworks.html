<!DOCTYPE html>
<html>
<head>
<script id="vertex-shader-fragments" type="x-shader/x-vertex">
attribute float vETime;
attribute vec2 vEVel;
attribute vec4 vPosition;
attribute vec2 vInitVel;
attribute float vInitialTime;

uniform float uTime;
uniform float uAceleration;
uniform float uVelocityFactor;

void test(float v, vec2 derp){
    
}
void test2(float v){

}
void test3(vec4 v){

}

vec2 currentPos(float currTime){
    float x, y;
    if (currTime<vETime)
    {
        x = vPosition.x + ((uVelocityFactor*vInitVel.x)*currTime);
        y = vPosition.y + ((uVelocityFactor*vInitVel.y)*currTime) + (0.5*uAceleration*currTime*currTime);
    }
    else {
        float aux = currTime - vETime;
        
        // current position
        x = vPosition.x + ((uVelocityFactor*vInitVel.x)*currTime);
        y = vPosition.y + ((uVelocityFactor*vInitVel.y)*currTime) + (0.5*uAceleration*currTime*currTime);

        // explosion position
        x = x + (((uVelocityFactor/1.5)*vEVel.x)*aux);
        y = y + ((uVelocityFactor*vEVel.y)*aux) + (0.5*uAceleration*aux*aux);
    }
    return vec2(x,y);
}

void main(){
    float currTime = uTime - vInitialTime;
    test(vETime,vEVel);
    test(vETime,vInitVel);
    test2(vInitialTime);
    test3(vPosition);
    gl_Position.w = 1.0;
    gl_PointSize = 5.0;
    gl_Position.xy = currentPos(currTime);
}
</script>
<script id="vertex-shader-line" type="x-shader/x-vertex">
    attribute vec4 vPosition;
    void main(){
        gl_Position = vPosition;
        gl_PointSize = 8.0;
    }
</script>
<script id="fragment-shader" type="x-shader/x-fragment">
precision mediump float;
void main() {
    //
    // Changes the color of the triangle
    //
    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);


    // Changes the square point to a round one
    float r = 0.0;
    vec2 cxy = 2.0 * gl_PointCoord - 1.0;
    r = dot(cxy, cxy);
    if (r > 1.0) {
        discard;
    }
}
</script>
<script type="text/javascript" src="../Common/webgl-utils.js"></script>
<script type="text/javascript" src="../Common/initShaders.js"></script>
<script type="text/javascript" src="../Common/MV.js"></script>
<script type="text/javascript" src="fireworks.js"></script>
</head>
<body>
    <title>Triangle</title>
    <canvas id="gl-canvas" width="1024" height="600">
        Oops... your browser doesn't support the HTML5 canvas element"
    </canvas>
</body>
</html>